# GCについて

Rustキャッチアップする上で低レイヤーの知識が不足していることに気づいたので、GCについて調べてみた。

## ChatGPTによる説明

ガベージコレクション（Garbage Collection）は、プログラムの実行中に使われなくなったメモリ領域を自動的に解放する仕組みであり、プログラミング言語や実行環境において重要な役割を果たす。

通常、プログラムは実行中に新しいオブジェクトやデータ構造をメモリに動的に作成するが、それらが不要になった際に手動でメモリを解放しないと、メモリリークやパフォーマンスの低下を引き起こす可能性がある。

ガベージコレクションは、プログラムが実行中に不要なメモリ領域を検出し、自動的に解放することで、開発者が手動でのメモリ管理を行う必要をなくす。

具体的なアルゴリズムや方法は言語や実行環境によって異なり、マーク・アンド・スイープや参照カウントなどのアプローチが一般的である。

これによって、効率的なメモリ管理とプログラムのパフォーマンス向上が実現される。

## ガベージコレクションを簡単にまとめると

- プログラムの実行中に使われなくなったメモリ領域を自動的に解放する仕組みのこと。
- 実行中のプログラムが占有していたメモリ領域のうち不要になったものを自動的に解放し、空き領域として再利用できるようにするもの。
- そのような処理を実行するプログラムを「ガベージコレクタ」（garbage collector）という。

## GCを採用している言語

- Java
- C#
- Python
- Ruby
- JavaScript
- Go

## GCを採用していない言語

- C
- C++
- Rust

## GCのメリット

- プログラマがメモリ管理を意識する必要がない
- メモリに関する知識がなくても、コードを書くことができる

## GCのデメリット

- GCが走る分のコストがかかり、アプリケーションの実行速度が落ちたり、停止することさえある
- GCが走るタイミングは人間がコントロールできず、効率や速度の面で最良とは言えない

上記のようなweak pointがあり、高いレイヤーで動作するアプリケーションでは問題なくとも、レイヤーが低くなるに伴い問題になることが増えていく。

## GCを採用していない言語はどうやってメモリ管理を行うのか

- C, C++: プログラマが明示的にメモリの確保と解放を行う必要がある。
- Rust: 所有権システムを導入することで、メモリの確保と解放を安全かつ効率的に行う。

> プログラマが明示的にメモリの確保・開放を指示したり、メモリの返還タイミングに厳密な規則を設けることで対応しています。前者はC/C++,後者はRustです。
>
> 引用: https://zenn.dev/pencilgon/articles/164c1e33bed446
