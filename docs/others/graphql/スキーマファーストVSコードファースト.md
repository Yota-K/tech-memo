# スキーマファーストVSコードファースト

- スキーマファースト・・・GraphQLスキーマを先に定義して、定義したスキーマに合わせて処理を書いていく開発手法。（TypeScriptで実装すると、GraphQLスキーマからTSの型を生成して、生成した型に合わせて実装を進めていくイメージ。）
- コードファースト・・・実装した処理からGraphQLスキーマを自動生成する開発手法。

元々はスキーマファーストしかなくて、後からコードファーストが出てきたっぽい。

[GraphQL for Beginners: Schema-first vs Code-first](https://lo-victoria.com/graphql-for-beginners-schema-first-vs-code-first)

## スキーマファースト

- メリット
    - GraphQLスキーマの設計と定義を固めてから実装に入るため、データのオーバーフェッチング、アンダーフェチングが起きづらい。
    - スキーマをクライアントサイドとバックエンド側の共通の所有物にしやすい。
- デメリット
    - GraphQLスキーマの設計と定義を完了させてからじゃないと、実装に入れない。
    - GraphQLスキーマの保守運用が大変。

## コードファースト

- メリット
    - リゾルバーをスキーマに一致させる必要がないので、開発工数を減らせる。
    - バックエンドの実装とGraphQLスキーマを常に一致させることができる。
- デメリット
    - GraphQLスキーマは自動生成されるので、バックエンドの所有物になってしまう。
    - APIの設計にそこまで重きを置かなくても、実装を進められてしまうため、データのオーバーフェッチングが発生してしまう可能性がある。

## 所感

コードファーストの方がメリットが大きい？

GraphQL詳しい人が開発→保守・運用もやるなら、スキーマファストもありだと思うけど、モノレポとかにして、クライアントサイド・バックエンドでGraphQLスキーマを共用のものにするとかじゃなければ、コードファーストの方が開発しやすそう。

## 新たにわかったこと

スキーマファーストかコードファーストかは、どの言語ライブラリを選ぶかに依存するらしい。

- Ruby: Ruby自体が動的型付け言語なので、コードファーストにせざるを得ないらしい。
- Golang: どっちもいけるが、[gqlgen](https://github.com/99designs/gqlgen)が優秀らしく、スキーマファーストでやることが多いらしい。
- TypeScript: どっちでもいける。

https://tsukiji-graphql.connpass.com/event/314173/ で得た情報。
