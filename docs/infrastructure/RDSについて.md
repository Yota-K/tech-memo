# RDSについて.md

- RDBをAWSクラウド上で、すぐに起動して、利用することができるサービス。
- MySQL、PostgreSQL、MariaDB、Amazon Auroraなどのソフトウェアを選択してDBを構築することができる。
- ストレージタイプは汎用とプロビジョンドIOPSから選択して、マグネティックは古いタイプなので、あまり利用しない
- パブリックアクセス構成・・・インターネットからDBへのアクセスを許可するためには、セキュリティグループでアクセスを許可する必要がある（パブリックサブネットに作成するだけじゃだめ）
- 一般的には踏み台サーバ用のEC2インスタンスを用意して、プライベートサブネットに設置したRDSにアクセスさせる構成が多い。
- 1つのAZに依存した構成だと、AZで障害が発生するとダウンタイムが発生するのでマルチAZ構成にすることで、より高い可用性を担保することができる
- マルチAZ構成は管理画面から有効にすることができる
- マルチAZ構成の効果
    - プライマリーデータベースとセカンダリーデータベースの構成
    - 2つのデータベースは同期レプリケーションを実施し、常に同じデータ内容を維持
    - プライマリー側に障害が発生した場合、自動でフェールオーバーが実行されセカンダリーデータベースがプライマリーに昇格する。
    - フェールオーバー時にCNAMEレコードがプライマリーからセカンダリーに移行する。
    - スタンバイ状態のDBはアクセス不可
- リードレプリカ・・・読み取り専用のレプリカを最大5台(Auroraは15台)設置し、 DBの読み取り処理をスケールアウトできる
- クロスリージョンでリードレプリカを構成することも可能
- RDSのスケールアップ
    - インスタンスサイズの変更
    - インスタンスタイプの変更
    - ストレージタイプの変更
- ストレージ容量は設定変更で増加させることはできるが、減少させることはできない。
キャッシュ機能を提供するElastiCacheを使用すれば、読込処理の一部をキャッシュに保持して、高速クエリ処理を実現する構成も可能
- バックアップ・・・スナップショットを取得することでデータを保存し、耐障害性を確保することができる。
    - 自動バックアップ・・・自動バックアップ有効化されていると、 Amazon RDSは毎日、データのスナップショットを自動的に作成する
    - スナップショットの取得・・・ユーザーによって指定された頻度でスナップショットを取得することが可能
