# DynamoDBについて

## 抑えておきたい概念

| DynamoDB       | RDB                              | 備考                       |
|----------------|----------------------------------|----------------------------|
| Table          | Table                            |                            |
| Item           | Row（レコード）                  |                            |
| Attributes     | Column（カラム）                 |                            |
| Partition Key  | Primary Key                      | ハッシュキーとも呼ばれる   |
| Sort Key       | 指定する場合はPrimary Keyを構成する一部になる | レンジキーとも呼ばれる     |

### できるだけ少ないテーブル数にする必要がある

> NoSQL の設計の違い
> ・対照的に、DynamoDB の場合は答えが必要な質問が分かるまで、スキーマの設計を開始すべきではありません。
> ・ビジネス上の問題とアプリケーションのユースケースを理解することが不可欠です。
> DynamoDB アプリケーションではできるだけ少ないテーブルを維持する必要があります。

**引用元**

https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/bp-general-nosql-design.html

## パーティションキーとソートキー

### パーティションキー（ハッシュキー）

RDBでいう主キーのようなもの。

**必ず設定する必要がある。**

### ソートキー（レンジキー）

範囲指定やソートをする際に必要になるキー。

ソートキー以外のAttribute（RDBでいうカラム）での並び替えはできない。

**必要でなければ、設定する必要はない。**

パーティションキーとソートキーの両方を指定している場合は、2つのキーが主キーになる。

→どちらか片方だけ指定してもデータの取得はできない。

## まとめ的な

- パーティションキーだけある場合・・・**主キーはパーティションキーになる**
- パーティションキーとソートキー両方ある場合・・・**主キーはパーティションキーとソートキーをセットにした複合キーになる**
- SQLのWhere句のようなことを実現するために、パーティションキーとソートキーが必要になる。
- パーティションキー（ハッシュキー）とソートキー（レンジキー）以外で検索したい場合は**セカンダリインデックスの指定が必要**になる。
